knitr::opts_chunk$set(echo = TRUE)
name <- Sys.info()
name[7]
hi
name <- Sys.info()
name[7]
### Load the packages we will need for this file ####
library(tidyverse) # load the installed package for each new session of R
library(broom) # helps for storing regression output
library(here) # for file organization
library(modelsummary) # For making regression tables
library(dagitty) # for creating DAGs
library(psych)
# Read in cleaned data
Dataset1 <- read.csv("Dataset 1_Clean.csv")
# Convert to numerics (aside from Country)
Dataset1[, 2:19] <- lapply(Dataset1[, 2:19], as.numeric)
testImplications <- function( covariance.matrix, sample.size ){
library(ggm)
tst <- function(i){ pcor.test( pcor(i,covariance.matrix), length(i)-2, sample.size )$pvalue }
tos <- function(i){ paste(i,collapse=" ") }
implications <- list(c("LEBF","GDPPC","UtilityInfr","HXPC","Age","TotFertRate"),
c("LEBF","GDPPC","UtilityInfr","HXPC","Age","maxINFM"),
c("LEBF","GDPPC","UtilityInfr","HXPC","TotFertRate","Country"),
c("LEBF","GDPPC","UtilityInfr","HXPC","Country","maxINFM"),
c("LEBF","TotFertRate","UtilityInfr","HXPC","Age","maxINFM"),
c("LEBF","TotFertRate","UtilityInfr","HXPC","Country","maxINFM"),
c("LEBF","FtoMPrimaryEnrl","Age","TotFertRate","GDPPC","PctUrb"),
c("LEBF","FtoMPrimaryEnrl","Age","TotFertRate","UtilityInfr","HXPC"),
c("LEBF","FtoMPrimaryEnrl","Age","UtilityInfr","HXPC","maxINFM"),
c("LEBF","FtoMPrimaryEnrl","TotFertRate","GDPPC","PctUrb","Country"),
c("LEBF","FtoMPrimaryEnrl","TotFertRate","UtilityInfr","HXPC","Country"),
c("LEBF","FtoMPrimaryEnrl","UtilityInfr","HXPC","maxINFM","Country"),
c("LEBF","PctUrb","UtilityInfr","HXPC","FtoMPrimaryEnrl","Age","GDPPC"),
c("LEBF","PctUrb","Age","TotFertRate","UtilityInfr","HXPC"),
c("LEBF","PctUrb","UtilityInfr","maxINFM","HXPC","Age"),
c("LEBF","PctUrb","TotFertRate","UtilityInfr","HXPC","Country"),
c("LEBF","PctUrb","UtilityInfr","maxINFM","HXPC","Country"),
c("LEBF","FLFPR","Age","TotFertRate","FtoMPrimaryEnrl","GDPPC"),
c("LEBF","FLFPR","Age","TotFertRate","GDPPC","PctUrb"),
c("LEBF","FLFPR","UtilityInfr","HXPC","Age","TotFertRate"),
c("LEBF","FLFPR","UtilityInfr","HXPC","Age","maxINFM"),
c("LEBF","FLFPR","TotFertRate","GDPPC","PctUrb","Country"),
c("LEBF","FLFPR","UtilityInfr","HXPC","TotFertRate","Country"),
c("LEBF","FLFPR","UtilityInfr","HXPC","maxINFM","Country"),
c("LEBF","Age","TotFertRate","GDPPC","PctUrb","Country"),
c("LEBF","Age","TotFertRate","UtilityInfr","HXPC","Country"),
c("LEBF","Age","UtilityInfr","maxINFM","HXPC","Country"),
c("Country","maxINFM","HXPC","TotFertRate","UtilityInfr"),
c("Country","maxINFM","TotFertRate","GDPPC","PctUrb"),
c("Country","maxINFM","Age"),
c("Country","GDPPC","Age"),
c("Country","HXPC","PctUrb","GDPPC"),
c("Country","HXPC","Age"),
c("Country","TotFertRate","Age"),
c("Country","FtoMPrimaryEnrl","GDPPC","PctUrb"),
c("Country","FtoMPrimaryEnrl","Age"),
c("Country","PctUrb","Age"),
c("Country","FLFPR","FtoMPrimaryEnrl"),
c("Country","FLFPR","GDPPC","PctUrb"),
c("Country","FLFPR","Age"),
c("Country","UtilityInfr","GDPPC"),
c("Country","UtilityInfr","Age"),
c("maxINFM","GDPPC","TotFertRate","UtilityInfr","HXPC"),
c("maxINFM","FtoMPrimaryEnrl","TotFertRate","GDPPC","PctUrb"),
c("maxINFM","FtoMPrimaryEnrl","TotFertRate","UtilityInfr","HXPC"),
c("maxINFM","PctUrb","FtoMPrimaryEnrl","UtilityInfr","HXPC","Age","GDPPC"),
c("maxINFM","PctUrb","TotFertRate","UtilityInfr","HXPC"),
c("maxINFM","FLFPR","Age","TotFertRate","FtoMPrimaryEnrl","GDPPC"),
c("maxINFM","FLFPR","TotFertRate","GDPPC","PctUrb"),
c("maxINFM","FLFPR","UtilityInfr","HXPC","TotFertRate"),
c("maxINFM","Age","TotFertRate","GDPPC","PctUrb"),
c("maxINFM","Age","TotFertRate","UtilityInfr","HXPC"),
c("GDPPC","FLFPR","FtoMPrimaryEnrl"),
c("HXPC","TotFertRate","FtoMPrimaryEnrl","Age","GDPPC"),
c("HXPC","TotFertRate","PctUrb","GDPPC"),
c("HXPC","FtoMPrimaryEnrl","GDPPC","PctUrb"),
c("HXPC","FLFPR","FtoMPrimaryEnrl"),
c("HXPC","FLFPR","GDPPC","PctUrb"),
c("HXPC","Age","GDPPC","PctUrb"),
c("TotFertRate","PctUrb","FtoMPrimaryEnrl","Age","GDPPC"),
c("TotFertRate","UtilityInfr","GDPPC"),
c("FtoMPrimaryEnrl","Age","GDPPC","PctUrb"),
c("FtoMPrimaryEnrl","UtilityInfr","GDPPC"),
c("PctUrb","FLFPR","FtoMPrimaryEnrl"),
c("PctUrb","UtilityInfr","GDPPC"),
c("FLFPR","Age","GDPPC","PctUrb"),
c("FLFPR","Age","FtoMPrimaryEnrl"),
c("FLFPR","UtilityInfr","GDPPC"),
c("FLFPR","UtilityInfr","FtoMPrimaryEnrl"),
c("Age","UtilityInfr","GDPPC"))
data.frame( implication=unlist(lapply(implications,tos)),
pvalue=unlist( lapply( implications, tst ) ) )
}
testImplications
dag {
install.packages("ggdag")
install.packages("ggdag")
library(ggdag)
testImplications <- function( covariance.matrix, sample.size ){
library(ggm)
tst <- function(i){ pcor.test( pcor(i,covariance.matrix), length(i)-2, sample.size )$pvalue }
tos <- function(i){ paste(i,collapse=" ") }
implications <- list(c("LEBF","GDPPC","UtilityInfr","HXPC","Age","TotFertRate"),
c("LEBF","GDPPC","UtilityInfr","HXPC","Age","maxINFM"),
c("LEBF","GDPPC","UtilityInfr","HXPC","TotFertRate","Country"),
c("LEBF","GDPPC","UtilityInfr","HXPC","Country","maxINFM"),
c("LEBF","TotFertRate","UtilityInfr","HXPC","Age","maxINFM"),
c("LEBF","TotFertRate","UtilityInfr","HXPC","Country","maxINFM"),
c("LEBF","FtoMPrimaryEnrl","Age","TotFertRate","GDPPC","PctUrb"),
c("LEBF","FtoMPrimaryEnrl","Age","TotFertRate","UtilityInfr","HXPC"),
c("LEBF","FtoMPrimaryEnrl","Age","UtilityInfr","HXPC","maxINFM"),
c("LEBF","FtoMPrimaryEnrl","TotFertRate","GDPPC","PctUrb","Country"),
c("LEBF","FtoMPrimaryEnrl","TotFertRate","UtilityInfr","HXPC","Country"),
c("LEBF","FtoMPrimaryEnrl","UtilityInfr","HXPC","maxINFM","Country"),
c("LEBF","PctUrb","UtilityInfr","HXPC","FtoMPrimaryEnrl","Age","GDPPC"),
c("LEBF","PctUrb","Age","TotFertRate","UtilityInfr","HXPC"),
c("LEBF","PctUrb","UtilityInfr","maxINFM","HXPC","Age"),
c("LEBF","PctUrb","TotFertRate","UtilityInfr","HXPC","Country"),
c("LEBF","PctUrb","UtilityInfr","maxINFM","HXPC","Country"),
c("LEBF","FLFPR","Age","TotFertRate","FtoMPrimaryEnrl","GDPPC"),
c("LEBF","FLFPR","Age","TotFertRate","GDPPC","PctUrb"),
c("LEBF","FLFPR","UtilityInfr","HXPC","Age","TotFertRate"),
c("LEBF","FLFPR","UtilityInfr","HXPC","Age","maxINFM"),
c("LEBF","FLFPR","TotFertRate","GDPPC","PctUrb","Country"),
c("LEBF","FLFPR","UtilityInfr","HXPC","TotFertRate","Country"),
c("LEBF","FLFPR","UtilityInfr","HXPC","maxINFM","Country"),
c("LEBF","Age","TotFertRate","GDPPC","PctUrb","Country"),
c("LEBF","Age","TotFertRate","UtilityInfr","HXPC","Country"),
c("LEBF","Age","UtilityInfr","maxINFM","HXPC","Country"),
c("Country","maxINFM","HXPC","TotFertRate","UtilityInfr"),
c("Country","maxINFM","TotFertRate","GDPPC","PctUrb"),
c("Country","maxINFM","Age"),
c("Country","GDPPC","Age"),
c("Country","HXPC","PctUrb","GDPPC"),
c("Country","HXPC","Age"),
c("Country","TotFertRate","Age"),
c("Country","FtoMPrimaryEnrl","GDPPC","PctUrb"),
c("Country","FtoMPrimaryEnrl","Age"),
c("Country","PctUrb","Age"),
c("Country","FLFPR","FtoMPrimaryEnrl"),
c("Country","FLFPR","GDPPC","PctUrb"),
c("Country","FLFPR","Age"),
c("Country","UtilityInfr","GDPPC"),
c("Country","UtilityInfr","Age"),
c("maxINFM","GDPPC","TotFertRate","UtilityInfr","HXPC"),
c("maxINFM","FtoMPrimaryEnrl","TotFertRate","GDPPC","PctUrb"),
c("maxINFM","FtoMPrimaryEnrl","TotFertRate","UtilityInfr","HXPC"),
c("maxINFM","PctUrb","FtoMPrimaryEnrl","UtilityInfr","HXPC","Age","GDPPC"),
c("maxINFM","PctUrb","TotFertRate","UtilityInfr","HXPC"),
c("maxINFM","FLFPR","Age","TotFertRate","FtoMPrimaryEnrl","GDPPC"),
c("maxINFM","FLFPR","TotFertRate","GDPPC","PctUrb"),
c("maxINFM","FLFPR","UtilityInfr","HXPC","TotFertRate"),
c("maxINFM","Age","TotFertRate","GDPPC","PctUrb"),
c("maxINFM","Age","TotFertRate","UtilityInfr","HXPC"),
c("GDPPC","FLFPR","FtoMPrimaryEnrl"),
c("HXPC","TotFertRate","FtoMPrimaryEnrl","Age","GDPPC"),
c("HXPC","TotFertRate","PctUrb","GDPPC"),
c("HXPC","FtoMPrimaryEnrl","GDPPC","PctUrb"),
c("HXPC","FLFPR","FtoMPrimaryEnrl"),
c("HXPC","FLFPR","GDPPC","PctUrb"),
c("HXPC","Age","GDPPC","PctUrb"),
c("TotFertRate","PctUrb","FtoMPrimaryEnrl","Age","GDPPC"),
c("TotFertRate","UtilityInfr","GDPPC"),
c("FtoMPrimaryEnrl","Age","GDPPC","PctUrb"),
c("FtoMPrimaryEnrl","UtilityInfr","GDPPC"),
c("PctUrb","FLFPR","FtoMPrimaryEnrl"),
c("PctUrb","UtilityInfr","GDPPC"),
c("FLFPR","Age","GDPPC","PctUrb"),
c("FLFPR","Age","FtoMPrimaryEnrl"),
c("FLFPR","UtilityInfr","GDPPC"),
c("FLFPR","UtilityInfr","FtoMPrimaryEnrl"),
c("Age","UtilityInfr","GDPPC"))
data.frame( implication=unlist(lapply(implications,tos)),
pvalue=unlist( lapply( implications, tst ) ) )
}
testImplications <- function( covariance.matrix, sample.size ){
library(ggm)
tst <- function(i){ pcor.test( pcor(i,covariance.matrix), length(i)-2, sample.size )$pvalue }
tos <- function(i){ paste(i,collapse=" ") }
implications <- list(c("LEBF","GDPPC","UtilityInfr","HXPC","Age","TotFertRate"),
c("LEBF","GDPPC","UtilityInfr","HXPC","Age","maxINFM"),
c("LEBF","GDPPC","UtilityInfr","HXPC","TotFertRate","Country"),
c("LEBF","GDPPC","UtilityInfr","HXPC","Country","maxINFM"),
c("LEBF","TotFertRate","UtilityInfr","HXPC","Age","maxINFM"),
c("LEBF","TotFertRate","UtilityInfr","HXPC","Country","maxINFM"),
c("LEBF","FtoMPrimaryEnrl","Age","TotFertRate","GDPPC","PctUrb"),
c("LEBF","FtoMPrimaryEnrl","Age","TotFertRate","UtilityInfr","HXPC"),
c("LEBF","FtoMPrimaryEnrl","Age","UtilityInfr","HXPC","maxINFM"),
c("LEBF","FtoMPrimaryEnrl","TotFertRate","GDPPC","PctUrb","Country"),
c("LEBF","FtoMPrimaryEnrl","TotFertRate","UtilityInfr","HXPC","Country"),
c("LEBF","FtoMPrimaryEnrl","UtilityInfr","HXPC","maxINFM","Country"),
c("LEBF","PctUrb","UtilityInfr","HXPC","FtoMPrimaryEnrl","Age","GDPPC"),
c("LEBF","PctUrb","Age","TotFertRate","UtilityInfr","HXPC"),
c("LEBF","PctUrb","UtilityInfr","maxINFM","HXPC","Age"),
c("LEBF","PctUrb","TotFertRate","UtilityInfr","HXPC","Country"),
c("LEBF","PctUrb","UtilityInfr","maxINFM","HXPC","Country"),
c("LEBF","FLFPR","Age","TotFertRate","FtoMPrimaryEnrl","GDPPC"),
c("LEBF","FLFPR","Age","TotFertRate","GDPPC","PctUrb"),
c("LEBF","FLFPR","UtilityInfr","HXPC","Age","TotFertRate"),
c("LEBF","FLFPR","UtilityInfr","HXPC","Age","maxINFM"),
c("LEBF","FLFPR","TotFertRate","GDPPC","PctUrb","Country"),
c("LEBF","FLFPR","UtilityInfr","HXPC","TotFertRate","Country"),
c("LEBF","FLFPR","UtilityInfr","HXPC","maxINFM","Country"),
c("LEBF","Age","TotFertRate","GDPPC","PctUrb","Country"),
c("LEBF","Age","TotFertRate","UtilityInfr","HXPC","Country"),
c("LEBF","Age","UtilityInfr","maxINFM","HXPC","Country"),
c("Country","maxINFM","HXPC","TotFertRate","UtilityInfr"),
c("Country","maxINFM","TotFertRate","GDPPC","PctUrb"),
c("Country","maxINFM","Age"),
c("Country","GDPPC","Age"),
c("Country","HXPC","PctUrb","GDPPC"),
c("Country","HXPC","Age"),
c("Country","TotFertRate","Age"),
c("Country","FtoMPrimaryEnrl","GDPPC","PctUrb"),
c("Country","FtoMPrimaryEnrl","Age"),
c("Country","PctUrb","Age"),
c("Country","FLFPR","FtoMPrimaryEnrl"),
c("Country","FLFPR","GDPPC","PctUrb"),
c("Country","FLFPR","Age"),
c("Country","UtilityInfr","GDPPC"),
c("Country","UtilityInfr","Age"),
c("maxINFM","GDPPC","TotFertRate","UtilityInfr","HXPC"),
c("maxINFM","FtoMPrimaryEnrl","TotFertRate","GDPPC","PctUrb"),
c("maxINFM","FtoMPrimaryEnrl","TotFertRate","UtilityInfr","HXPC"),
c("maxINFM","PctUrb","FtoMPrimaryEnrl","UtilityInfr","HXPC","Age","GDPPC"),
c("maxINFM","PctUrb","TotFertRate","UtilityInfr","HXPC"),
c("maxINFM","FLFPR","Age","TotFertRate","FtoMPrimaryEnrl","GDPPC"),
c("maxINFM","FLFPR","TotFertRate","GDPPC","PctUrb"),
c("maxINFM","FLFPR","UtilityInfr","HXPC","TotFertRate"),
c("maxINFM","Age","TotFertRate","GDPPC","PctUrb"),
c("maxINFM","Age","TotFertRate","UtilityInfr","HXPC"),
c("GDPPC","FLFPR","FtoMPrimaryEnrl"),
c("HXPC","TotFertRate","FtoMPrimaryEnrl","Age","GDPPC"),
c("HXPC","TotFertRate","PctUrb","GDPPC"),
c("HXPC","FtoMPrimaryEnrl","GDPPC","PctUrb"),
c("HXPC","FLFPR","FtoMPrimaryEnrl"),
c("HXPC","FLFPR","GDPPC","PctUrb"),
c("HXPC","Age","GDPPC","PctUrb"),
c("TotFertRate","PctUrb","FtoMPrimaryEnrl","Age","GDPPC"),
c("TotFertRate","UtilityInfr","GDPPC"),
c("FtoMPrimaryEnrl","Age","GDPPC","PctUrb"),
c("FtoMPrimaryEnrl","UtilityInfr","GDPPC"),
c("PctUrb","FLFPR","FtoMPrimaryEnrl"),
c("PctUrb","UtilityInfr","GDPPC"),
c("FLFPR","Age","GDPPC","PctUrb"),
c("FLFPR","Age","FtoMPrimaryEnrl"),
c("FLFPR","UtilityInfr","GDPPC"),
c("FLFPR","UtilityInfr","FtoMPrimaryEnrl"),
c("Age","UtilityInfr","GDPPC"))
data.frame( implication=unlist(lapply(implications,tos)),
pvalue=unlist( lapply( implications, tst ) ) )
}
library(tidyverse) # load the installed package for each new session of R
library(broom) # helps for storing regression output
library(here) # for file organization
library(modelsummary) # For making regression tables
library(dagitty) # for creating DAGs
library(psych)
library(ggdag)
dag <- dagitty("dag{y <- z -> x}")
tidy_dagitty(dag)
install.packages("ggforce")
library(ggforce)
library(ggdag)
dag <- dagitty("dag{y <- z -> x}")
tidy_dagitty(dag)
dag
?tidy_dagitty
dag <- tidy_dagitty(dagitty("dag{y <- z -> x}"))
library(igraph)
tidy_dagitty(dag)
ggdag(dag, layout = "circle")
library(ggplot2)
dag <- dagitty("dag{y <- z -> x}")
ggdag(dag, layout = "circle")
library(ggforce)
install.packages("ggforce")
library(ggforce)
remove.packages("ggforce")
install.packages("ggforce")
dag {
our_dag <- ggdag::dagify(d ~ p,
m ~ d,
y ~ d,
y ~ m)
ggdag::ggdag(our_dag)
our_dag <- ggdag::dagify(d ~ p,
m ~ d,
y ~ d,
y ~ m)
ggdag::ggdag(our_dag)
